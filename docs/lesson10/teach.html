<!DOCTYPE html>
<!-- Copyright 2020, Brigham Young University - Idaho. All rights reserved. -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>CSE 111 - Team Activity</title>
    <link rel="icon" type="image/png" href="../site/icon.png">
    <link rel="stylesheet" type="text/css" href="../site/style.css">
    <script src="https://www.gstatic.com/firebasejs/8.2.7/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.7/firebase-database.js"></script>
    <script src="../site/url.js"></script>
    <script src="../site/urlWrite.js"></script>
    <script src="../site/color.js"></script>
</head>

<body>
<header>
    <div class="colorCtrl">&nbsp;</div>
    <div class="logo">
        <div class="upper">BYU</div>
        <div class="lower">Idaho</div>
    </div>
    <h2>CSE 111 | <span>Programming with Functions</span></h2>
</header>
<article>
    <h1>10 Team Activity: Data Visualization</h1>

    <h2>Instructions</h2>
    <p>Arrange a one hour synchronous meeting with your team for this
    activity. Online students should coordinate a video-sharing meeting.
    Campus students will use class time for this meeting. You should
    prepare for this meeting by completing the preparation material and
    the individual checkpoint assignment beforehand.</p>

    <h2>Helpful Documentation</h2>
    <ol class="long">
        <li><div>The <a href="../lesson09/prepare.html">prepare</a>
        content for the previous lesson includes example code for the
        following:
        <ol>
            <li><div>Reading a CSV file into a DataFrame.</div></li>
            <li><div>Filtering the rows of a DataFrame.</div></li>
            <li><div>Creating new columns in a DataFrame.</div></li>
        </ol></div></li>

        <li><div>The <a href="../lesson09/prove.html">prove</a>
        assignment from the previous lesson includes example code for
        grouping and summarizing the rows in a DataFrame.</div></li>

        <li><div>The <a href="prepare.html">prepare</a> content for this
        lesson includes example code for drawing a vertical bar
        plot.</div></li>

        <li><div>A tutorial at Geeks for Geeks shows how to
        <a href="https://www.geeksforgeeks.org/python-pandas-series-dt-year/">extract the year</a>
        from a datetime column.</div></li>

        <li><div>The <code>pandas</code> Getting Started Tutorials
        contain a
        <a href="https://pandas.pydata.org/pandas-docs/stable/getting_started/intro_tutorials/04_plotting.html">short section about creating plots</a>.</div></li>

        <li><div>The <code>pandas</code> User Guide contains a
        <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/visualization.html">long section about creating plots</a>.</div></li>
    </ol>

    <h2>Assignment</h2>
    <h3>Core Requirements</h3>
    <p>Write a Python program named <code>visualize_teach.py</code> that
    uses <code>pandas</code> and includes several functions to answer
    these three questions about the
    <a download href="../lesson09/water.zip">water usage data</a> from
    the City of Rexburg:</p>

    <ol class="long">
        <li><div>Is the total amount of water used in the City of
        Rexburg increasing each year?</div></li>
        <li><div>Is the amount of water used by apartment complexes in
        the City of Rexburg increasing each year?</li></div>
        <li><div>Is the amount of water used by businesses in
        the City of Rexburg increasing each year?</li></div>
    </ol>

    <p>Your program must filter, group, and aggregate the water usage
    data to compute actual numbers that answer the three questions
    above. Your program must print those numbers formatted nicely as
    shown in the sample run below and must draw at least two plots to
    help a user visualize the data that is printed out.</p>

    <p>Your program must be split into several functions:</p>
    <ul class="long">
        <li><div><code>main</code> which calls <code>pd.read_csv</code>
        to read the contents of the <code>water.csv</code> file into a
        data frame and then calls the other functions. Of course,
        <code>main</code> may include additional statements as
        needed.</div></li>

        <li><div><p>For each of the three questions above, one function
        that shows a plot to answer the corresponding
        question.<sup>*</sup></p>

        <ul class="note"><li>Because the second and third questions are
        very similar, it is reasonably easy to add parameters to the
        function that answers the second question, so that it can be
        reused to answer both the second and third questions.</li></ul>
        </div></li>
    </ul>


    <h3>Stretch Challenges</h3>
    <p>If your team finishes the core requirements in less than an
    hour, complete one or more of these stretch challenges. Note that
    the stretch challenges are optional.</p>

    <ol>
        <li><div><p>Write another function that shows a chart to answer
        this question, "Is the average amount of water used <em>per
        dwelling</em> increasing each year?" <sup>*</sup></p>

        <ul class="note"><li>If you examine the water data closely, you
        will see that some water meters serve both a business and one or
        more apartments. When analyzing data to answer the stretch
        question, your program should exclude the water usage data for
        such meters because there is no way to determine how much water
        went to the business and how much went to the attached
        apartment. In fact, when answering the stretch question, your
        program should use only the data for apartment complexes,
        residences, town homes, and trailer courts.</li></ul>
        </div></li>
   </ol>

    <h2>Sample Run</h2>
<pre class="console">&gt; python prove_solution.py

Total water usage by year (in 1000 gallons):
      sumUsage
year
2015   1863804
2016   1985262
2017   1880506
2018   1999372
2019   2325421

Apartment Complex water usage by year (in 1000 gallons):
      sumUsage
year
2015    476491
2016    490781
2017    460989
2018    470969
2019    494621

Business water usage by year (in 1000 gallons):
      sumUsage
year
2015    374424
2016    361005
2017    376274
2018    407715
2019    455834

Average usage per dwelling (in 1000 gallons):
      sumUsage  sumDwellings  usagePerDwelling
year
2015   1108284       32181.9              34.4
2016   1175975       32642.0              36.0
2017   1084619       31533.2              34.4
2018   1107399       33716.2              32.8
2019   1117934       35919.1              31.1</pre>

    <p><img src="total_usage.png"
    alt="A vertical bar plot showing the total water used in the City of Rexburg grouped by year."
    title="A vertical bar plot showing the total water used in the City of Rexburg grouped by year."></p>

    <p><img src="apartment_usage.png"
    alt="A vertical bar plot showing the water used by apartment complexes in the City of Rexburg grouped by year."
    title="A vertical bar plot showing the water used by apartment complexes in the City of Rexburg grouped by year."></p>

    <p><img src="business_usage.png"
    alt="A vertical bar plot showing the water used by businesses in the City of Rexburg grouped by year."
    title="A vertical bar plot showing the water used by businesses in the City of Rexburg grouped by year."></p>

    <p><img src="usage_per_dwelling.png"
    alt="A vertical bar plot showing the average amount of water used per dwelling in the City of Rexburg grouped by year."
    title="A vertical bar plot showing the average amount of water used per dwelling in the City of Rexburg grouped by year."></p>

    <h2>Testing Procedure</h2>
    <p>Verify that your program works correctly by following each step
    in this testing procedure:</p>
    <ol class="test long">
        <li><div>Run your program and verify that it prints the correct
        results, rounded and formatted as shown in the sample run
        above.</div></li>

        <li><div>Examine the charts displayed by your program and verify
        that the charts show the same values as the printed
        results.</div></li>
    </ol>

    <h2>Ponder</h2>
    <p>Examine the printed output and the plots displayed by your
    program. What are the answers to the two questions in the Assignment
    section?</p>

    <h2>Sample Solution</h2>
    <p>Please work diligently with your team for the one hour meeting.
    After the meeting is over, please compare your approach to the
    <a download href="teach_solution.py">sample solution</a>. Please
    <strong>do not look at the sample solution</strong> until you have
    either finished the program or diligently worked for at least one
    hour. At the end of the hour, if you are still struggling to
    complete the assignment, you may use the sample solution to help you
    finish.</p>

    <h2>Submission</h2>
    <p>When you have finished the activity, please report your progress
    via the associated I-Learn quiz. When asked about which of the
    requirements you completed, feel free to include any work done
    during the team meeting or after the meeting, including work done
    with the help of the sample solution, if necessary. In short, report
    on what you were able to accomplish, regardless of when you
    completed it or if you needed help from the sample solution.</p>
</article>
<footer>
    <small>Copyright &copy; 2020, Brigham Young University - Idaho. All
    rights reserved.</small>
</footer>
</body>
</html>
