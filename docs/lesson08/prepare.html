<!DOCTYPE html>
<!-- Copyright 2020, Brigham Young University - Idaho. All rights reserved. -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>CSE 111 - Prepare</title>
    <link rel="icon" type="image/png" href="../site/icon.png">
    <link rel="stylesheet" type="text/css" href="../site/style.css">
    <link rel="stylesheet" type="text/css" href="../site/hljs/vscode.css">
    <script src="https://www.gstatic.com/firebasejs/8.2.7/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.7/firebase-database.js"></script>
    <script src="../site/url.js"></script>
    <script src="../site/urlWrite.js"></script>
    <script src="../site/color.js"></script>
    <script src="../site/linenums.js"></script>
    <script src="../site/hljs/highlight.pack.js"></script>
</head>

<body>
<header>
    <div class="colorCtrl">&nbsp;</div>
    <div class="logo">
        <div class="upper">BYU</div>
        <div class="lower">Idaho</div>
    </div>
    <h2>CSE 111 | <span>Programming with Functions</span></h2>
</header>
<article>
    <h1>08 Prepare: Repetition and Text Files</h1>
    <p>In this lesson, you will learn how to store and retrieve data
    from Python lists and dictionaries.</p>

    <h2>Videos</h2>
    <p>Watch these videos about lists and dictionaries in Python.</p>

    <ul class="links">
        <li><div><a href="https://www.youtube.com/watch?v=LrOAl8vUFHY&list=PLlrxD0HtieHhS8VzuMCfQD4uJ9yne1mE6&index=27">Loops</a></div></li>
    </ul>

    <h2>Concepts</h2>
    <p>Here are the Python programming concepts and topics that you
    should learn during this lesson:</p>

    <ol class="long">
        <li><div>We can cause a computer to repeat a group of statements
        by writing <code>for</code> and <code>while</code> loops. A
        <code>for</code> loop iterates over a range of numbers such as
        <code>range(3, 10)</code> or a sequence such as a list. A
        <code>while</code> loop is more flexible than a <code>for</code>
        loop and repeats while some condition is true. The next code
        example shows three loops that iterate over a range of numbers.
        Notice that just like <code>if</code> statements in Python, the
        body of a loop starts and ends with indentation.

<div class="pre"><pre class="python" id="ex5">
# Count from zero to nine by ones.
for i in range(10):
    print(i)

# Count from zero to eight by twos.
for i in range(0, 10, 2):
    print(i)

# Count from 100 down to 70 by three.
for i in range(100, 69, -3):
    print(i)</pre></div>

        The next code example contains three loops that iterate over the
        elements in a list, set, and dictionary. The code in the body of
        these example loops is very small and simply prints a value.
        However, we can write as much code as we need in the body of a
        loop to repeatedly perform all manner of complex computations.

<div class="pre"><pre class="python" id="ex6">
# Create a list.
colors = ["red", "orange", "yellow", "green", "blue", "indigo"]

# Create a set.
names = {"Smith", "Lopez", "Marsh", "Olsen", "Vasiuk"}

# Create a dictionary.
students = {
    "67-412-8350" : "Alan Benson",
    "76-240-1835" : "Madison Silverlake",
    "06-412-7583" : "Samyukta Daniels"
}

# Print each value in a list.
for color in colors:
    print(color)

# Print each value in a set.
for family in names:
    print(family)

# Print each key value pair in a dictionary.
for inumber, name in students.items():
    print(inumber, name)</pre></div>
        </div></li>

        <li><div>A <code>break</code> statement causes a loop to end
        early. In the next code example, there is a <code>for</code>
        loop that asks the user to input ten numbers one at a time.
        However, the loop will terminate early if the user enters a zero
        (0) because of the <code>break</code> statement.

<div class="pre"><pre class="python" id="ex7">
# Get ten or fewer numbers from the user and add them
# together. Notice that this loop uses underscore (_) as
# the counting variable, which is a valid variable name.
# Many programmers use underscore to indicate that the
# variable will not be used within the body of the loop.
sum = 0
for _ in range(10):
    n = float(input("Please enter a number: "))
    if n == 0:
        <em>break</em>
    sum += n
print(sum)</pre></div>
        </div></li>
    </ol>

    <h3 id="textFiles">Text Files</h3>
    <p>The built-in
    <a href="https://docs.python.org/3/library/functions.html#open"><code>open()</code></a>
    function opens a file for reading or writing. The
    <a href="https://docs.python.org/3/tutorial/inputoutput.html#methods-of-file-objects"><code>file.read()</code></a>
    method reads characters or bytes from a file. The
    <a href="https://docs.python.org/3/library/stdtypes.html#str.splitlines"><code>string.splitlines()</code></a>
    method breaks a string into a list of strings, breaking at line
    boundaries. The following code example uses the built-in
    <code>open</code> function and <code>file.read</code> and
    <code>string.splitlines</code> methods to read the contents of a
    text file into a list.</p>

<div class="pre"><pre class="python" id="ex4">
# Open the plants.txt file for reading.
with <em>open("plants.txt", "rt")</em> as infile:

    # Read all the characters in the file into a string.
    <em>string = infile.read()</em>

# Split the string into a list of strings named
# plants. Each line from the plants.txt file
# will be stored in its own element in the list.
<em>plants = string.splitlines()</em>

# Print the entire list.
print(plants)</pre></div>

    <h2>Example - Reading from a File</h2>
    <p>The example program shown below handles exceptions that might
    occur when the program opens and reads from a file. This program
    contains only one <code>try</code> block, which begins at
    <span class="cross" data-ref="ex3">line&nbsp;4</span>
    and includes all the regular code in the main function.
    This one try block has four <code>except</code> blocks at
    <span class="cross" data-ref="ex3">lines&nbsp;40, 44,&nbsp;48,
    and&nbsp;52</span>.</p>

    <p>Each of the <code>except</code> blocks handles a different type
    of exception. The first three <code>except</code> blocks handle
    specific exceptions: <code>FileNotFoundError</code>,
    <code>PermissionError</code>, and <code>ZeroDivisionError</code>.
    The last <code>except</code> block handles
    <code>RuntimeError</code>, which is a general exception.
    <code>RuntimeError</code> is probably the most general type of
    exception that we want to handle in a Python program. The
    description above the first example program explains why.</p>

<div class="pre"><pre class="linenums"></pre>
<pre class="python" id="ex3">
import csv


def main():
    <em>try:</em>
        # Open the fuel_usage.csv file.
        filename = "fuel_usage.csv"
        with open(filename, "rt") as usage_file:

            # Use the standard csv module to get
            # a reader object for the CSV file.
            reader = csv.reader(usage_file)

            # The first line of the CSV file contains headings
            # and not fuel usage data, so this statement skips
            # the first line of the CSV file.
            next(reader)

            # Print headers for the three columns.
            print("Date,Start,End,Gallons,Miles/Gallon")

            # Process each row in the CSV file.
            for row in reader:

                # From the current row of the CSV file, get
                # the date, the starting and ending odometer
                # readings, and the number of gallons used.
                date = row[0]
                start_miles = float(row[1])
                end_miles = float(row[2])
                gallons = float(row[3])

                # Call the miles_per_gallon function.
                mpg = miles_per_gallon(start_miles, end_miles, gallons)

                # Display the results for one row.
                mpg = round(mpg, 1)
                print(date, start_miles, end_miles, gallons, mpg, sep=",")

    <em>except FileNotFoundError as file_not_found_err:</em>
        print(f"Error: cannot open {filename}"
                " because it doesn't exist.")

    <em>except PermissionError as perm_err:</em>
        print(f"Error: cannot read from {filename}"
                " because you don't have permission.")

    <em>except ZeroDivisionError as zero_div_err:</em>
        print(f"Error: {filename} contains a"
                " zero in the gallons column.")

    <em>except RuntimeError as run_err:</em>
        print(type(run_err).__name__, run_err, sep=": ")


def miles_per_gallon(start_miles, end_miles, gallons):
    """Compute and return the average number of miles
    that a vehicle traveled per gallon of fuel.
    start_miles and end_miles are odometer readings in miles.
    gallons is a fuel amount in U.S. gallons.
    """
    mpg = abs(end_miles - start_miles) / gallons
    return mpg


# Call the main function so that
# this program will start executing.
main()</pre></div>

    <h3 id="csvFiles">Comma Separated Values</h3>
    <p>Many computer systems import and export data in CSV files. CSV is
    an acronym for comma separated values. A CSV file is a text file
    that contains tabular data where each row is on a separate line and
    each cell (column) is separated by a comma. The following example is
    the contents of a CSV file that stores information about some dental
    offices in Rexburg, Idaho. Notice that the first row of the file
    contains column headings, the next four rows contain information
    about four dental offices, and each row contains three columns
    separated by commas.</p>

<div class="pre"><pre class="csv">
Company Name,Address,Phone Number
Eagle Rock Dental Care,556 Trejo Suite C,208-359-2224
Apple Tree Dental,33 Winn Drive Suite 2,208-359-1500
Rockhouse Dentistry,106 E 1st N,208-356-5600
Cornerstone Family Dental,44 S Center Street,208-356-4240
</pre></div>

    <p>Python has a module named
    <a href="https://docs.python.org/3/library/csv.html"><code>csv</code></a>
    that includes functionality to read and write data from CSV files.
    The following example code shows how to open a CSV file and use the
    <code>csv</code> module to read and print each row.</p>

<div class="pre"><pre class="python" id="ex5">
import csv

# Open a file named dentists.csv and store a reference
# to the opened file in a variable named infile.
with open("dentists.csv", "rt") as infile:

    # Use the csv module to create a reader
    # object that will read from the opened file.
    reader = csv.reader(infile)

    # The first line of the CSV file contains column headings
    # and not information about a dental office, so this
    # statement skips the first line of the CSV file.
    next(reader)

    # Read each row one at a time as a list.
    for row in reader:

        # For the current row, retrieve the
        # values in columns 0, 1, and 2.
        company = row[0]
        address = row[1]
        phone = row[2]

        # Print the values for the user to see.
        print(company, address, phone)</pre></div>

    <p>You could use this example code in a program that you write, but
    of course, you could modify the <code>for</code> loop in the code to
    do much more than simply print the contents of each row. For
    example, the next code sample shows how to read the contents of a
    CSV file into a dictionary.</p>

<div class="pre"><pre class="python" id="ex6">
import csv

# Create an empty dictionary that will
# store the data from the CSV file.
<em>dentists = {}</em>

# Open a file named dentists.csv and store a reference
# to the opened file in a variable named infile.
with open("dentists.csv", "rt") as infile:

    # Use the csv module to create a reader
    # object that will read from the opened file.
    reader = csv.reader(infile)

    # The first line of the CSV file contains column headings
    # and not information about a dental office, so this
    # statement skips the first line of the CSV file.
    next(reader)

    # Read each row one at a time as a list.
    for row in reader:

        # For the current row, retrieve the
        # values in columns 0, 1, and 2.
        company = row[0]
        address = row[1]
        phone = row[2]

        # Store the data from the current row into the dentists
        # dictionary. Use the phone number as the key. Create a
        # list with the company name and address as the value.
        <em>dentists[phone] = [company, address]</em>

# Print the entire dentists dictionary.
print(dentists)</pre></div>

    <h2>Documentation</h2>
    <p>If any of the concepts or topics in the previous list seem
    unfamiliar to you, reading these tutorials may help you recall
    these programming concepts from CSE 110.</p>

    <ul class="links">
        <li><div><a href="https://realpython.com/python-for-loop/">Python "for" Loops</a></div></li>
        <li><div><a href="https://realpython.com/python-while-loop/">Python "while" Loops</a></div></li>
        <li><div><a href="https://realpython.com/python-csv/">Reading and Writing CSV Files in Python</a></div></li>
    </ul>

    <p>You could also read some of the Python tutorials at
    <a href="https://www.w3schools.com/python/default.asp">W3 Schools</a>.
    Or you could search for "Python" in the
    <a href="https://library.byui.edu">online catalog</a> of the
    BYU-Idaho library and read one of the online books from the result
    set.</p>
</article>
<footer>
    <small>Copyright &copy; 2020, Brigham Young University - Idaho. All
    rights reserved.</small>
</footer>
</body>
</html>
